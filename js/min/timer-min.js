var t,TimerWidget,s,SettingsWidget,h,HistoryWidget,t,TimerWidget={settings:{timerSection:$("#timer"),timer:$("#time"),changeSettingsButton:$("#change-settings"),startPomodoroButton:$("#start-pomodoro"),startShortBreakButton:$("#start-short-break"),startLongBreakButton:$("#start-long-break"),progressNotification:$("#progress-notification"),pausePlay:$("#pause-play"),runningTimer:"",timerBegin:0,timerCountdown:1500,timerCountdownStart:1500,timerStart:moment(),pomoCount:0,statement:$("#statement"),timerEnd:moment(),timerType:"pomo",runningPauseTimer:"",pauseCounter:0,pauseStartMoment:moment(),pauseTime:$("#pause-time"),count:0,pauseCurrentMoment:moment(),pauseArea:$("#pause-area"),pauseText:$("#pause-text"),canvas:0,ctx:0,W:0,H:0,degrees:0,new_degrees:0,difference:0,color:"#EE424E",bgcolor:"#18191B",textColor:"#979797",text:"",animation_loop:"",redraw_loop:"",degreeCalculation:.24,playpause:!0,resetButton:$("#reset"),pauseMinuteDisplay:$("#pause-minute-display"),pauseSecondDisplay:$("#pause-second-display"),backgroundImage:$("#background-image"),startTime:$("#start-time")},init:function(){t=this.settings,this.bindUIActions(),TimerWidget.displayTimerFoyer(s.timerSetting),t.canvas=$("#timer-animation")[0],t.ctx=t.canvas.getContext("2d"),t.W=t.canvas.width,t.H=t.canvas.height,TimerWidget.draw()},bindUIActions:function(){t.changeSettingsButton.on("click",function(){SettingsWidget.enterSettings()}),t.resetButton.on("click",function(){TimerWidget.reset()}),t.pausePlay.click(function(){$(this).toggleClass("paused")}),t.pausePlay.on("click",function(){TimerWidget.setPlayPause()}),t.startPomodoroButton.on("click",function(){h.currentTask=h.taskInput.val(),h.taskInput.addClass("hide"),$(this).addClass("hide"),t.progressNotification.addClass("pomodoro-progress"),t.progressNotification.removeClass("hide short-break-progress long-break-setting"),""===h.currentTask&&(h.currentTask="Working Hard"),h.taskWritten.text(h.currentTask),h.taskWritten.removeClass("hide"),TimerWidget.cancelTimer(),t.timerType="pomo",t.timerCountdownStart=s.timerSetting,t.degrees=0,TimerWidget.startTimer(s.timerSetting,t.timerType)}),t.startShortBreakButton.on("click",function(){h.currentTask="Break Time",h.taskInput.addClass("hide"),$(this).addClass("hide"),t.progressNotification.addClass("short-break-progress"),t.progressNotification.removeClass("hide pomodoro-progress long-break-setting"),h.taskWritten.removeClass("hide"),TimerWidget.cancelTimer(),t.timerType="short-break",t.timerCountdownStart=s.shortBreakSetting,t.degrees=0,TimerWidget.startTimer(s.shortBreakSetting,t.timerType)}),t.startLongBreakButton.on("click",function(){h.currentTask="Long Break",h.taskInput.addClass("hide"),$(this).addClass("hide"),t.progressNotification.addClass("long-break-progress"),t.progressNotification.removeClass("hide short-break-progress pomodoro-progress"),h.taskWritten.removeClass("hide"),TimerWidget.cancelTimer(),t.timerType="long-break",t.timerCountdownStart=s.longBreakSetting,t.degrees=0,TimerWidget.startTimer(s.longBreakSetting,t.timerType)})},reset:function(){switch(TimerWidget.cancelTimer(),TimerWidget.cancelPauseTimer(),t.timerType){case"pomo":TimerWidget.showPomodoro();break;case"short-break":TimerWidget.showShortBreak();break;case"long-break":TimerWidget.showLongBreak();break;default:TimerWidget.showPomodoro()}},setPlayPause:function(){t.playpause=!t.playpause,t.playpause?(TimerWidget.cancelPauseTimer(),HistoryWidget.storeLocally({description:"Interrupted!",timeTaken:HistoryWidget.displayTimeTaken(t.count),timeStarted:t.pauseStartMoment.format("h:mm a"),timeEnded:t.pauseCurrentMoment.format("h:mm a"),id:t.pauseCurrentMoment.format("x"),date:t.timerEnd.format("MMMM Do, YYYY"),type:"interrupted",timeLabel:h.timeLabel}),TimerWidget.startTimer(t.timerCountdown,t.timerType)):TimerWidget.pauseTimer()},pauseTimer:function(){t.timerEnd=moment(),clearInterval(t.runningTimer),HistoryWidget.storeLocally({description:h.currentTask,timeTaken:HistoryWidget.displayTimeTaken(t.timerBegin-t.timerCountdown),timeStarted:t.timerStart.format("h:mm a"),timeEnded:t.timerEnd.format("h:mm a"),id:t.timerEnd.format("x"),date:t.timerEnd.format("MMMM Do, YYYY"),type:t.timerType,timeLabel:h.timeLabel}),t.pauseText.removeClass("hide"),t.pauseCounter=0,t.pauseStartMoment=moment();var e=Math.floor(t.pauseCounter/60),i=t.pauseCounter%60;t.pauseMinuteDisplay.text(TimerWidget.formatTime(e)),t.pauseSecondDisplay.text(TimerWidget.formatTime(i)),t.runningPauseTimer=setInterval(TimerWidget.intervalTimerUp,1e3)},cancelTimer:function(){t.timerEnd=moment(),clearInterval(t.runningTimer),t.timerCountdown=0},pomoFlow:function(e){"pomo"===e&&(t.pomoCount+=1,t.pomoCount%4===0?TimerWidget.showLongBreak():TimerWidget.showShortBreak()),"pomo"!==e&&TimerWidget.showPomodoro()},showPomodoro:function(){TimerWidget.displayTimerFoyer(s.timerSetting),t.startTime.removeClass("hide"),h.taskInput.removeClass("hide"),t.startPomodoroButton.removeClass("hide"),t.progressNotification.addClass("hide"),h.taskWritten.addClass("hide"),t.backgroundImage.removeClass("background__short-break background__long-break fade-out2"),t.backgroundImage.addClass("background__pomodoro fade-in2"),t.timer.removeClass("fade-in2"),t.timer.addClass("fade-out2"),t.timerType="pomo"},showLongBreak:function(){TimerWidget.displayTimerFoyer(s.longBreakSetting),t.startTime.removeClass("hide"),t.startLongBreakButton.removeClass("hide"),t.progressNotification.addClass("hide"),h.taskWritten.text("Nice work! Time to take a longer break."),t.backgroundImage.removeClass("background__short-break background__pomodoro fade-out2"),t.backgroundImage.addClass("background__long-break fade-in2"),t.timer.removeClass("fade-in2"),t.timer.addClass("fade-out2"),t.timerType="long-break",TimerWidget.cancelPauseTimer()},showShortBreak:function(){TimerWidget.displayTimerFoyer(s.shortBreakSetting),t.startTime.removeClass("hide"),t.startShortBreakButton.removeClass("hide"),t.progressNotification.addClass("hide"),h.taskWritten.text("Take a short break. You've earned it!"),t.backgroundImage.removeClass("background__long-break background__pomodoro fade-out2"),t.backgroundImage.addClass("background__short-break fade-in2"),t.timer.removeClass("fade-in2"),t.timer.addClass("fade-out2"),t.timerType="short-break",TimerWidget.cancelPauseTimer()},startTimer:function(e,i){t.timerBegin=e,t.timerStart=moment(),t.timerCountdown=e,t.degreeCalculation=360/t.timerCountdownStart,t.statement.addClass("hide"),TimerWidget.displayTimer(t.timerCountdown),TimerWidget.hideTimerFoyer(),t.runningTimer=setInterval(TimerWidget.intervalTimer,1e3,i),h.historyEmptyState.addClass("hide"),h.historyData.removeClass("hide")},chooseStatement:function(e){return"pomo"===e?t.pomoCount%4===0?"Take a long break!":"Take a short break!":"Back to work with you!"},intervalTimerUp:function(){t.pauseCurrentMoment=moment(),t.count=t.pauseCurrentMoment.diff(t.pauseStartMoment,"second");var e=Math.floor(t.count/60),i=t.count%60;t.pauseMinuteDisplay.text(TimerWidget.formatTime(e)),t.pauseSecondDisplay.text(TimerWidget.formatTime(i))},displayTimerFoyer:function(e){t.pauseArea.addClass("hide");var i=Math.floor(e/60),a=e%60;t.startTime.text(TimerWidget.formatTime(i)+":"+TimerWidget.formatTime(a))},cancelPauseTimer:function(){t.pausePlay.removeClass("paused"),t.playpause=!0,clearInterval(t.runningPauseTimer),t.degrees=t.new_degrees,t.pauseText.addClass("hide")},intervalTimer:function(e){if(t.timerCountdown<=1&&TimerWidget.cancelTimer(),t.timerCountdown>0)t.timerCountdown=t.timerBegin-Math.round((moment()-t.timerStart)/1e3);else if(t.timerCountdown<=0){if(TimerWidget.pomoFlow(e),s.soundOn===!0){var i="sound/ringing-bells.mp3",a=new Audio(i);a.play()}"short-break"===e||"long-break"===e?(s.notifyOn===!0&&SettingsWidget.notify("img/tomato-notification.png","Break Over!","Back to work."),HistoryWidget.storeLocally({description:"Break Time",timeTaken:HistoryWidget.displayTimeTaken(t.timerBegin-t.timerCountdown),timeStarted:t.timerStart.format("h:mm a"),timeEnded:t.timerEnd.format("h:mm a"),id:t.timerEnd.format("x"),date:t.timerEnd.format("MMMM Do, YYYY"),type:e,timeLabel:h.timeLabel})):(s.notifyOn===!0&&SettingsWidget.notify("img/coffee-notification.png","Nice work!","You deserve a break."),HistoryWidget.storeLocally({description:h.currentTask,timeTaken:HistoryWidget.displayTimeTaken(t.timerBegin-t.timerCountdown),timeStarted:t.timerStart.format("h:mm a"),timeEnded:t.timerEnd.format("h:mm a"),id:t.timerEnd.format("x"),date:t.timerEnd.format("MMMM Do, YYYY"),type:e,timeLabel:h.timeLabel}))}TimerWidget.displayTimer(t.timerCountdown)},hideTimerFoyer:function(){t.timer.removeClass("fade-out2 fade-out").addClass("fade-in2"),t.backgroundImage.removeClass("fade-in2").addClass("fade-out2")},displayTimer:function(e){t.pauseArea.removeClass("hide");var i=Math.floor(e/60),a=e%60;t.text=""+TimerWidget.formatTime(i)+":"+TimerWidget.formatTime(a),TimerWidget.draw()},formatTime:function(t){return 10>t?"0"+t:t},initAnimation:function(){t.ctx.closePath(),t.ctx.clearRect(0,0,t.W,t.H),t.ctx.beginPath(),t.ctx.strokeStyle=t.bgcolor,t.ctx.lineWidth=15,t.ctx.arc(t.W/2,t.H/2,100,0,2*Math.PI,!1),t.ctx.stroke(),t.ctx.closePath();var e=t.degrees*Math.PI/180;t.ctx.beginPath(),t.ctx.strokeStyle=t.color,t.ctx.lineWidth=15,t.ctx.arc(t.W/2,t.H/2,100,0-90*Math.PI/180,e-90*Math.PI/180,!1),t.ctx.stroke(),t.ctx.fillStyle=t.textColor,t.ctx.font="300 50px lato";var i=t.ctx.measureText(t.text).width;t.ctx.fillText(t.text,t.W/2-i/2,t.H/2+15)},draw:function(){void 0!==typeof t.animation_loop&&clearInterval(t.animation_loop),t.new_degrees=Math.round((t.timerCountdownStart-t.timerCountdown)*t.degreeCalculation),t.difference=t.degrees-t.new_degrees,t.animation_loop=setInterval(TimerWidget.animate_to,1e3/t.difference)},animate_to:function(){t.degrees===t.new_degrees?clearInterval(t.animation_loop):t.degrees<t.new_degrees?t.degrees++:t.degrees--,TimerWidget.initAnimation()}},s,SettingsWidget={settings:{timeInput:$("#time-input"),shortBreakInput:$("#short-break"),longBreakInput:$("#long-break"),saveButton:$("#save-settings"),cancelButton:$("#cancel-settings"),settingsSection:$("#settings"),setNotifications:$("#setNotifications"),setSound:$("#setSound"),toastUnsupported:$("#toast-unsupported"),toastNotifications:$("#toast-notifications"),toastSound:$("#toast-sound"),closeToastUnsupported:$("#close-toast-unsupported"),closeToastNotifications:$("#close-toast-notifications"),closeToastSound:$("#close-toast-sound"),timerSetting:1500,shortBreakSetting:300,longBreakSetting:1200,localSettings:JSON.parse(localStorage.getItem("settingsData"))||{},notifyOn:!1,soundOn:!0},init:function(){s=this.settings,this.bindUIActions(),jQuery.isEmptyObject(s.localSettings)||(s.timerSetting=60*s.localSettings.timerSetting,s.shortBreakSetting=60*s.localSettings.shortBreakSetting,s.longBreakSetting=60*s.localSettings.longBreakSetting,s.notifyOn=s.localSettings.notifyOn,s.soundOn=s.localSettings.soundOn,s.timeInput.attr("value",s.localSettings.timerSetting||25),s.shortBreakInput.attr("value",s.localSettings.shortBreakSetting||5),s.longBreakInput.attr("value",s.localSettings.longBreakSetting||20)),s.notifyOn===!0?s.setNotifications.attr("checked",!0):s.setNotifications.attr("checked",!1),s.soundOn===!0?s.setSound.attr("checked",!0):s.setSound.attr("checked",!1)},bindUIActions:function(){s.saveButton.on("click",function(){SettingsWidget.saveSettings()}),s.cancelButton.on("click",function(){SettingsWidget.exitSettings()}),s.setNotifications.on("click",function(){SettingsWidget.checkNotificationSetting(this)}),s.setSound.on("click",function(){SettingsWidget.checkSoundSetting(this)}),s.closeToastUnsupported.on("click",function(){SettingsWidget.closeToast($(this).parent())}),s.closeToastNotifications.on("click",function(){SettingsWidget.closeToast($(this).parent())}),s.closeToastSound.on("click",function(){SettingsWidget.closeToast($(this).parent())})},saveSettings:function(){s.timerSetting=60*s.timeInput.val(),s.shortBreakSetting=60*s.shortBreakInput.val(),s.longBreakSetting=60*s.longBreakInput.val(),s.localSettings={timerSetting:s.timeInput.val(),shortBreakSetting:s.shortBreakInput.val(),longBreakSetting:s.longBreakInput.val(),notifyOn:s.notifyOn,soundOn:s.soundOn},localStorage.setItem("settingsData",JSON.stringify(s.localSettings)),TimerWidget.reset(),SettingsWidget.exitSettings()},enterSettings:function(){s.settingsSection.removeClass("hide"),$(".settings-modal").focus()},exitSettings:function(){s.settingsSection.addClass("hide")},checkNotificationSetting:function(t){$(t).prop("checked")?SettingsWidget.askToNotify():(s.notifyOn=!1,s.toastNotifications.removeClass("hide"))},askToNotify:function(){"Notification"in window?"granted"===Notification.permission?(s.notifyOn=!0,SettingsWidget.notify("","Desktop notifications have been enabled.","")):"denied"!==Notification.permission?Notification.requestPermission(function(t){"granted"===t&&(s.notifyOn=!0,SettingsWidget.notify("","Desktop notifications have been enabled.",""))}):s.notifyOn=!1:s.toastUnsupported.removeClass("hide")},notify:function(t,e,i){var a={body:i,icon:t},o=new Notification(e,a);setTimeout(o.close.bind(o),5e3),o.onclick=function(){o.close(),window.focus()}},closeToast:function(t){t.addClass("hide")},checkSoundSetting:function(t){$(t).prop("checked")?s.soundOn=!0:(s.soundOn=!1,s.toastSound.removeClass("hide"))}},h,HistoryWidget={settings:{taskArea:$("#task-area"),taskInput:$("#task-input"),taskWritten:$("#task-written"),historyData:$("#history-data"),historyDataTable:$("#history-data-table"),historyEmptyState:$("#history-empty"),taskInputButton:$("#task-input-button"),data:JSON.parse(localStorage.getItem("taskData"))||{},clearHistory:$("#clear-history"),saveButton:$("#save-button"),taskSaveArea:$("#task-save-area"),cancelButton:$("#cancel-button"),currentTaskEdit:"",editTaskButton:$("#edit-task"),oldTaskInfo:"",exportButton:$("#export-table"),exportCSV:$("#export-csv"),row:JSON.parse(localStorage.getItem("rowData"))||[],currentTask:"",dateArray:[],timeLabel:"min",taskSaveShowing:!1,saveCanceled:!1},init:function(){h=this.settings,this.bindUIActions(),$.each(h.data,function(t,e){HistoryWidget.addTask(e)}),$.isEmptyObject(h.data)?h.historyEmptyState.removeClass("hide"):(h.historyData.removeClass("hide"),h.historyEmptyState.addClass("hide"))},bindUIActions:function(){h.taskInput.keyup(function(e){13===e.which&&t.startPomodoroButton.click()}),h.clearHistory.on("click",function(){HistoryWidget.clearHistory()}),h.historyDataTable.on("click",".edit-task",function(){HistoryWidget.editTask(this)}),h.historyDataTable.on("focus",".history__task-description",function(){HistoryWidget.showSave($(this).attr("id"))}),h.historyDataTable.on("keydown",".history__task-description",function(t){return 13===t.which&&($(this).blur(),HistoryWidget.saveTask(h.currentTaskEdit)),13!==t.which}),h.historyDataTable.on("click","#save-button",function(){HistoryWidget.saveTask(h.currentTaskEdit)}),h.historyDataTable.on("click","#cancel-button",function(){HistoryWidget.cancelSave()}),h.exportButton.on("click",function(){HistoryWidget.exportTable()}),h.exportCSV.on("click",function(){HistoryWidget.exportTableToCSV.apply(this,[h.row,"timesheet.csv"])})},displayTimeTaken:function(t){var e,i,a,o="",s=t;return s>=3600?(e=Math.floor(s/3600),s-=3600*e):e="00",s>=60?(i=Math.floor(s/60),s-=60*i):i="00",s>=0&&(a=s),o=HistoryWidget.addZero(e)+":"+HistoryWidget.addZero(i)+":"+HistoryWidget.addZero(a)},displayTimeOnTable:function(t){var e=t.split(":");return"00"!==e[0]||"00"!==e[1]?60*parseInt(e[0])+parseInt(e[1]):"<1"},addZero:function(t){return 10>t&&"00"!==t?"0"+t:t},editTask:function(t){var e=$(t).attr("id");$("#task-"+e).focus()},cancelSave:function(){""!==h.oldTaskInfo&&($("#"+h.currentTaskEdit).text(h.oldTaskInfo),h.oldTaskInfo=""),HistoryWidget.hideSave()},showSave:function(t){HistoryWidget.saveTask(h.currentTaskEdit),h.oldTaskInfo=$("#"+t).text(),h.currentTaskEdit=t,$("#"+h.currentTaskEdit).attr("tabindex","1").addClass("focus-border");var e=t.substring(10);if(!h.taskSaveShowing){var i=$("<div>",{id:"task-save-area","class":"task-save-area"}).insertAfter($("#"+e));$("<button>",{id:"save-button","class":"save-button button-small button__accent3 waves-effect waves-light",text:"Save"}).appendTo(i),$("<button>",{id:"cancel-button","class":"cancel-button button-ghost waves-effect waves-light",text:"Cancel"}).appendTo(i),h.taskSaveShowing=!0}},saveTask:function(t){if(""!==t){var e=$("#"+t).parent().parent().attr("id");h.data[e].description=$("#"+h.currentTaskEdit).text(),localStorage.setItem("taskData",JSON.stringify(h.data));for(var i=0;i<h.row.length;i++)h.row[i].id===e&&(h.row[i].task=$("#"+h.currentTaskEdit).text(),localStorage.setItem("rowData",JSON.stringify(h.row)));h.oldTaskInfo=""}HistoryWidget.hideSave()},hideSave:function(){$("#"+h.currentTaskEdit).prop("tabindex",null).removeClass("focus-border"),h.taskSaveArea=$("#task-save-area"),h.taskSaveArea.remove(),h.taskSaveShowing=!1},clearHistory:function(){localStorage.removeItem("taskData"),localStorage.removeItem("rowData"),h.data={},h.row=[],h.dateArray=[],$("#history-data-body").empty(),$("#history-data").addClass("hide"),$("#history-empty").removeClass("hide")},storeLocally:function(t){h.data[t.id]=t,localStorage.setItem("taskData",JSON.stringify(h.data)),h.row.push({task:t.description,"time started":t.timeStarted,"time ended":t.timeEnded,id:t.id,"time spent":t.timeTaken,date:t.date}),localStorage.setItem("rowData",JSON.stringify(h.row)),HistoryWidget.addTask(t)},exportTable:function(){var t=[{title:"Date",dataKey:"date"},{title:"Task",dataKey:"task"},{title:"Start Time",dataKey:"time started"},{title:"Stop Time",dataKey:"time ended"},{title:"Duration",dataKey:"time spent"}],e="data:image/png;base64,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",i=new jsPDF("p","pt");i.autoTable(t,h.row,{styles:{fillColor:[242,61,80],fillStyle:"S"},columnStyles:{date:{fillColor:255}},headerStyles:{fillColor:[242,61,80],fillStyle:"F"},margin:{top:60},beforePageContent:function(t){i.addImage(e,"JPEG",t.settings.margin.left,25,157.142857143,27.8195488722),i.text("Timesheet",t.settings.margin.left+168,46)}}),i.save("timesheet.pdf")},exportTableToCSV:function(t,e){for(var i="Date, Task, Start Time, Stop Time, Duration",a=0;a<h.row.length;a++){var o=h.row[a].date.split(",").join(""),s=""+o+","+h.row[a].task+","+h.row[a]["time started"]+","+h.row[a]["time ended"]+","+h.row[a]["time spent"];i+="\r\n"+s}var n="data:application/csv;charset=utf-8,"+encodeURIComponent(i);window.navigator.msSaveBlob?window.navigator.msSaveOrOpenBlob(new Blob([i],{type:"text/plain;charset=utf-8;"}),"timesheet.csv"):$(this).attr({download:e,href:n,target:"_blank"})},addTask:function(t){var e={taskItem:"history__task-item task-icon",taskDescription:"history__task-description",taskTime:"history__task-duration task-time__arrow",taskStart:"history__task-time",id:t.id,date:t.date,type:t.type,timeLabel:t.timeLabel},i=HistoryWidget.displayTimeOnTable(t.timeTaken);h.historyEmptyState.addClass("hide");var a=e.date;a=a.replace(/[,\s+]/g,"").toLowerCase(),$.inArray(e.date,h.dateArray)<=-1&&(h.dateArray.push(e.date),$("<div>",{"class":a}).prependTo($("#history-data-body")),$("<p>",{"class":"date-header",text:e.date}).appendTo($("."+a)),$("<div>",{"class":""+a+"-body"}).appendTo($("."+a)));var o=$("<div>",{"class":e.taskItem+" fade-in2 "+e.type+"-icon",id:e.id}).prependTo($("."+a+"-body")),s=$("<div>",{"class":e.taskTime+" arrow-"+e.type,text:i,"data-label":"Duration"}).appendTo(o);$("<abbr>",{"class":"history__task-duration-label",text:e.timeLabel}).appendTo(s);var n=$("<div>",{"class":"description-container",id:e.id+"-container","data-label":"Task"}).appendTo(o);$("<div>",{"class":e.taskDescription,text:t.description,id:"task-edit-"+e.id,contenteditable:"true"}).appendTo(n);var r=$("<div>",{"class":"history__task-time"}).appendTo(n);$("<div>",{"class":e.taskStart,text:t.timeStarted+" - "+t.timeEnded,"data-label":"Times"}).appendTo(r),$("<button>",{"class":"edit-task button-ghost waves-effect waves-light",id:"edit-"+e.id,text:"Edit"}).appendTo(o)}},a,AboutWidget={settings:{showAbout:$("#show-about"),aboutSection:$("#about-section"),closeAbout:$("#close-about")},init:function(){a=this.settings,this.bindUIActions()},bindUIActions:function(){a.showAbout.on("click",function(){AboutWidget.showAbout()}),a.closeAbout.on("click",function(){AboutWidget.closeAbout()})},showAbout:function(){a.aboutSection.removeClass("hide")},closeAbout:function(){a.aboutSection.addClass("hide")}};$(document).ready(function(){"use strict";SettingsWidget.init(),TimerWidget.init(),HistoryWidget.init(),AboutWidget.init()});